# TASK-008: AI構造最適化準備

## 📋 タスク概要

**目的**: AI関連ファイルの現状分析・統合計画策定・新構造設計  
**重要度**: 高（Phase 2の基盤作業）  
**難易度**: 中  
**所要時間**: 20分  
**依存関係**: TASK-007完了（Phase 1 検証済み）

## 🎯 実行内容

### 1. 現状分析
- docs/ai/ 配下の既存ファイル確認
- AI関連設定の分散状況把握
- 重複・不整合の特定

### 2. 新構造設計
- ai/ ディレクトリ構造の設計
- system_prompt.md の要件定義
- glossary.yml の要件定義

### 3. 統合計画策定
- 移行手順の明確化
- 次タスクへの引き継ぎ情報整理

## 🚀 詳細手順

### Step 1: 既存AI関連ファイル分析

#### docs/ai/ の現状確認
- context-optimization*.md の内容・目的確認
- ファイルサイズ・更新日確認
- 他ディレクトリでのAI関連ファイル存在確認

#### 分散状況の把握
- ai/context/ に既存ファイルがあるか確認
- .devcontainer.json にAI関連拡張機能設定があるか確認
- README等でAI関連の言及があるか確認

### Step 2: 理想構造の設計

#### ai/ ディレクトリ構造設計
理想的な構造を以下の観点で設計：
- context/ : 文脈最適化関連
- prompts/ : プロンプトテンプレート  
- config/ : AI設定ファイル
- examples/ : 使用例・テンプレート

#### system_prompt.md 要件定義
以下の情報を含む統一プロンプトを設計：
- プロジェクト背景・目的
- 技術スタック・制約事項
- コーディング規約・品質基準
- freee API連携に関する注意点

#### glossary.yml 要件定義
以下を含むドメイン用語辞書を設計：
- freee固有用語（経費、勘定科目等）
- 技術用語（OCR、API、認証等）
- プロジェクト固有略語
- 類義語・関連語の整理

### Step 3: 移行・統合計画策定

#### ファイル移行計画
- docs/ai/ から ai/ への移行対象特定
- 移行時の名前変更・構造調整計画
- 既存ファイルの扱い（統合・削除・保持）

#### 新規作成計画
- system_prompt.md の構成・内容計画
- glossary.yml のカテゴリ・項目計画
- 既存情報からの抽出方法

#### 品質保証計画
- YAML構文チェック方法
- プロンプト効果検証方法
- 用語統一確認方法

## ✅ 完了基準

### 分析完了
- [ ] docs/ai/ 全ファイルの内容・特徴把握済み
- [ ] AI関連ファイル分散状況把握済み
- [ ] 重複・不整合箇所特定済み

### 設計完了
- [ ] ai/ ディレクトリ構造設計完了
- [ ] system_prompt.md 要件・構成決定
- [ ] glossary.yml カテゴリ・項目設計完了

### 計画完了
- [ ] ファイル移行手順明確化
- [ ] 品質保証方法決定
- [ ] 次タスク向け引き継ぎ情報準備

## 🔍 確認ポイント

### 現状分析の観点
- **網羅性**: AI関連ファイルの漏れなし
- **重複性**: 同様内容の複数ファイル存在
- **関連性**: 他ファイルでのAI関連記述

### 設計の観点
- **拡張性**: 将来の機能追加に対応可能
- **保守性**: 更新・管理が容易
- **実用性**: 実際のAI作業で活用可能

### 計画の観点
- **実現性**: 次タスクで確実に実行可能
- **安全性**: 既存情報の消失リスク最小化
- **効率性**: 最小限の作業で最大効果

## ⚠️ 注意事項

### 既存ファイルの扱い
- docs/ai/ の既存ファイルは削除前に必ずバックアップ
- 有用な情報は新構造に確実に引き継ぎ
- 不要になったファイルも一時的に保持

### 設計時の考慮点
- Claude 3.7のコンテキスト制限を考慮
- 複数AI モデル対応の汎用性確保
- 日本語・英語双方への対応

### 品質保証
- system_prompt.md は実際にClaudeで試験
- glossary.yml はYAML構文チェック必須
- 既存プロンプトとの一貫性確保

## 🔄 次タスクへの準備

### TASK-009: system_prompt.md作成
- 本タスクで定めた要件に基づく実装
- 既存情報の統合・構造化
- 実用性・効果の検証

### TASK-010: glossary.yml作成  
- 設計したカテゴリ・項目の実装
- 既存文書からの用語抽出・整理
- YAML構文・構造の検証

### 引き継ぎ情報
このタスクで作成する分析レポートを次タスクの基礎資料として活用

---

**Phase 2の成功は適切な準備から始まります。現状を正確に把握し、実用的な新構造を設計しましょう。**