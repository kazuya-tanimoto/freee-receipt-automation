# AIコンテキスト最適化ガイドライン

## 目的
人間・AIの双方が迷わず参照できる1か所の情報源を提供し、RAGコンテキストを効率的に管理します。

## トークン制限
- 初期コンテキスト用の要約は2k tokensを上限とします
- 長文が必要な場合は`ai/context/`に分割し、エージェントが動的に検索して取り込む方式を採用します

## コンテキスト管理
1. **要約（SUMMARY.md）**
   - 位置: `docs/guidelines/SUMMARY.md`
   - 用途: AIの初期コンテキストとして使用
   - 制限: 2k tokens以下を厳守

2. **フルドキュメント**
   - 位置: Git Submoduleとして管理
   - 更新: 週次で自動更新（`scripts/update-guidelines.sh`）
   - 検索: 必要に応じて動的に参照

## 運用ルール
1. **更新フロー**
   - 要約の手編集は禁止
   - 内容更新は自動抽出またはスクリプト経由
   - 重大変更はADRを追加

2. **CIチェック**
   - `guidelines-size-check.yml`で4k tokens超を検出
   - 超過時はPRをfail

3. **定期更新**
   - 週次（月曜4時）で`update-guidelines.sh`を実行
   - 自動PRとCHANGELOG更新

## 最適化のポイント
1. **コンテキスト分割**
   - 長文は`ai/context/`に分割
   - エージェントは必要に応じて検索

2. **参照効率**
   - 頻繁に参照する情報は要約に含める
   - 詳細情報はSubmoduleで管理

3. **メンテナンス性**
   - 自動更新で最新状態を維持
   - CIで品質を担保 