# レビュー依頼ガイドライン

## 概要

本ドキュメントは、コード変更、ドキュメント更新、プルリクエストのレビュー依頼を行う際の標準化されたテンプレートを提供します。すべてのレビュー依頼は、レビュアーが事前知識なしに変更内容を理解できる十分なコンテキストを含む必要があります。

## 必須情報の原則

すべてのレビュー依頼に以下を含めること：
- 何のタスクを行っているか
- どのリポジトリとブランチか
- 効果的なレビューのための完全なコンテキスト

## タスクタイプ早見表

以下は汎用的な識別子ではなく、説明的なタスクタイプの例です：

| カテゴリ | タスクタイプ例 |
|----------|-------------------|
| 開発 | 機能実装、バグ修正、リファクタリング、パフォーマンス最適化 |
| ドキュメント | ドキュメント更新、APIドキュメント、ユーザーガイド、技術仕様書 |
| インフラ | CI/CD設定、依存関係更新、環境構築、データベース移行 |
| デザイン | UI/UX実装、デザインシステム更新、アクセシビリティ改善、モバイル最適化 |

## レビュー依頼テンプレート

### 基本情報（必須）
```
**タスク**: [作業内容の簡潔な説明]
**リポジトリ**: [リポジトリ名]
**ブランチ**: [ソースブランチ -> ターゲットブランチ]
**レビュアー**: [担当レビュアー]
**作業日時**: [YYYY/MM/DD HH:MM - HH:MM]
```

### 要点（必須）
```
**主な変更点**: [1-2文で主要な変更の要約]
**影響エリア**: [影響を受ける主要システム/機能]
**レビュー重点**: [レビュアーが最も注意すべき点]
```

### 作業概要（必須）
```
**変更内容**: [変更の簡単な説明]
**変更ファイル数**: [数]個 ([新規: X / 変更: Y / 削除: Z])
**影響範囲**: [変更による影響のある領域]
```

### 変更詳細（必須）
```
**追加**:
- [新しい機能/ファイル/機能のリスト]

**変更**:
- [変更された機能/ファイル/機能のリスト]

**削除**:
- [削除された機能/ファイル/機能のリスト]
```

### セルフレビュー結果（必須）
```
**実施済みチェック**:
- [ ] コードコンパイル/ビルド成功
- [ ] テスト通過
- [ ] ドキュメント更新
- [ ] セキュリティ考慮事項確認
- [ ] ライセンス準拠確認

**テスト結果**: [テスト実行の概要]
**品質メトリクス**: [カバレッジ、リント結果など]
```

### レビューポイント（必須）
```
**重点確認箇所**:
1. [注意が必要な特定領域]
2. [セキュリティ/パフォーマンス考慮事項]
3. [複雑なロジックやエッジケース]

**既知の問題**: [制限事項や回避策]
**リスク**: [潜在的リスクや懸念事項]
```

### 確認方法（任意）
```
**テストコマンド**:
- ビルド: `[コマンド]`
- テスト: `[コマンド]`
- リント: `[コマンド]`

**手動確認**:
- [ステップバイステップの確認手順]

**デモ/プレビュー**: [変更を確認するURLまたは方法]
```

### 承認後アクション（任意）
```
**次のステップ**:
- [承認後に実行すべきアクション]

**関連タスク**: [依存関係や後続タスク]
**通知対象**: [通知が必要な人]
```

## テンプレート例

### コードレビュー例

<details>
<summary>コードレビュー例を展開</summary>

```markdown
**タスク**: ユーザー認証機能実装
**リポジトリ**: auth-service
**ブランチ**: feature/user-authentication -> main
**レビュアー**: @senior-dev, @security-team
**作業日時**: 2025/05/20 10:00 - 12:00

**主な変更点**: セッションベース認証からJWTベース認証への移行実装
**影響エリア**: 認証フロー、APIエンドポイント、フロントエンド連携
**レビュー重点**: トークンセキュリティ実装とエラーハンドリング

**変更内容**: JWT認証システムの実装
**変更ファイル数**: 8個 (新規: 4 / 変更: 3 / 削除: 1)
**影響範囲**: 認証フロー、APIエンドポイント、フロントエンド統合

**追加**:
- JWTトークン生成・検証
- API保護用認証ミドルウェア
- ログイン/ログアウトエンドポイント
- ユーザーセッション管理

**変更**:
- APIルート保護機能
- フロントエンド認証状態管理
- 認証失敗時のエラーハンドリング

**削除**:
- レガシーセッションベース認証コード

**実施済みチェック**:
- [x] コードコンパイル成功
- [x] 全テスト通過（カバレッジ95%）
- [x] セキュリティ監査完了
- [x] APIドキュメント更新
- [x] JWTライブラリのライセンス準拠確認

**テスト結果**: 45/45テスト通過、セキュリティ脆弱性なし
**品質メトリクス**: カバレッジ95%、ESLintクリーン、TypeScript厳格モード

**重点確認箇所**:
1. JWTトークンセキュリティ実装
2. パスワードハッシュ化・検証
3. セッションタイムアウト処理
4. エラーメッセージのサニタイズ

**既知の問題**: レート制限未実装（後続タスク）
**リスク**: 既存API利用者への破壊的変更

**テストコマンド**:
- ビルド: `npm run build`
- テスト: `npm test -- --coverage`
- セキュリティ: `npm audit && npm run security-check`

**手動確認**:
1. 有効な認証情報でのログインテスト
2. トークン期限切れ処理確認
3. 未認証アクセス保護確認
4. エラーレスポンス検証

**デモ/プレビュー**: http://localhost:3000/auth-demo

**次のステップ**:
- 承認後にマージ
- ステージング環境へのデプロイ
- APIドキュメント更新
- フロントエンドチームとの統合調整

**関連タスク**: AUTH-002 (レート制限), AUTH-003 (2要素認証)
**通知対象**: @frontend-team, @devops-team
```
</details>

### ドキュメントレビュー例

<details>
<summary>ドキュメントレビュー例を展開</summary>

```markdown
**タスク**: APIドキュメント更新
**リポジトリ**: api-documentation
**ブランチ**: docs/api-v2-update -> main
**レビュアー**: @tech-writer, @api-team
**作業日時**: 2025/05/20 14:00 - 16:00

**主な変更点**: 新認証セクションを含むAPI v2ドキュメントの全面改訂
**影響エリア**: 開発者ドキュメントとコードサンプル
**レビュー重点**: 技術的正確性とサンプル機能

**変更内容**: API v2ドキュメントの全面改訂
**変更ファイル数**: 5個 (新規: 1 / 変更: 4 / 削除: 0)
**影響範囲**: 開発者ドキュメント、APIリファレンス、コードサンプル

**追加**:
- 新しい認証セクション
- エラーハンドリングガイド
- インタラクティブAPIエクスプローラー

**変更**:
- 例付きエンドポイントドキュメント
- リクエスト/レスポンススキーマ
- レート制限ドキュメント
- クイックスタートガイド

**実施済みチェック**:
- [x] 全リンク動作確認
- [x] コードサンプルテスト
- [x] スペル・文法チェック
- [x] 技術的正確性レビュー
- [x] ライセンスと帰属表示の確認

**テスト結果**: 全APIサンプル正常実行確認
**品質メトリクス**: 読みやすさスコア85/100、リンク切れなし

**重点確認箇所**:
1. 新認証フローの技術的正確性
2. コードサンプルの動作確認
3. 既存ドキュメントとの一貫性
4. エラーシナリオの完全性

**既知の問題**: マイグレーションガイド未完成（別タスク）
**リスク**: 開発者が新フォーマットに慣れるまで時間が必要

**テストコマンド**:
- リンクチェック: `make lint-docs`
- サンプルテスト: `make test-samples`
- ビルド: `make build-docs`

**手動確認**:
1. クイックスタートガイドに従って手順実行
2. 全コードサンプルの実行確認
3. 相互参照の確認
4. モバイル対応確認

**デモ/プレビュー**: https://docs-preview.example.com/

**次のステップ**:
- 承認後に本番公開
- 開発者コミュニティへのアナウンス
- 関連ドキュメントの更新

**関連タスク**: DOC-005 (マイグレーションガイド), DOC-006 (動画チュートリアル)
**通知対象**: @developer-relations, @support-team
```
</details>

### プルリクエストレビュー例

<details>
<summary>プルリクエスト例を展開</summary>

```markdown
**タスク**: ユーザーインターフェース改善
**リポジトリ**: frontend-app
**ブランチ**: feature/ui-improvements -> main
**レビュアー**: @ui-lead, @frontend-team
**作業日時**: 2025/05/20 09:00 - 11:00

**主な変更点**: レスポンシブ対応を含むダッシュボードとナビゲーションUIの全面改修
**影響エリア**: メインダッシュボードとコアナビゲーションコンポーネント
**レビュー重点**: アクセシビリティ準拠とクロスブラウザ互換性

**変更内容**: ダッシュボードとナビゲーション改善
**変更ファイル数**: 12個 (新規: 2 / 変更: 10 / 削除: 0)
**影響範囲**: メインダッシュボード、ナビゲーションコンポーネント、スタイリング

**追加**:
- 新しいダッシュボードウィジェット
- レスポンシブナビゲーションメニュー
- 非同期操作用ローディング状態

**変更**:
- ダッシュボードレイアウト構造
- カラースキームとタイポグラフィ
- ボタンコンポーネントスタイリング
- モバイルレスポンシブブレークポイント

**実施済みチェック**:
- [x] クロスブラウザテスト完了
- [x] モバイル対応確認
- [x] アクセシビリティ基準準拠
- [x] パフォーマンス影響評価
- [x] UIコンポーネントのライセンス準拠確認

**テスト結果**: E2Eテスト通過、ビジュアルリグレッションテストクリア
**品質メトリクス**: Lighthouseスコア95/100、コンソールエラーなし

**重点確認箇所**:
1. アクセシビリティ準拠（WCAG 2.1）
2. 読み込み時間への影響
3. クロスブラウザ互換性
4. モバイルユーザーエクスペリエンス

**既知の問題**: IE11サポート廃止（決定済み）
**リスク**: ユーザーが新レイアウトに慣れるまで時間が必要

**テストコマンド**:
- E2E: `npm run e2e`
- ビジュアルリグレッション: `npm run visual-test`
- パフォーマンス: `npm run lighthouse`

**手動確認**:
1. デバイス間でのレスポンシブ動作テスト
2. キーボードナビゲーション確認
3. スクリーンリーダー互換性確認
4. デザインモックアップとの照合

**デモ/プレビュー**: https://preview-branch.herokuapp.com/

**次のステップ**:
- 承認後にmainブランチへマージ
- 最終テスト用ステージングデプロイ
- ユーザーフィードバック収集
- 段階的ロールアウト計画

**関連タスク**: UI-003 (ユーザーオンボーディング), UI-004 (アナリティクス)
**通知対象**: @design-team, @product-managers
```
</details>

## 既存ガイドラインとの統合

このレビューガイドラインは以下と統合されています：
- [コーディングスタンダード](./coding-standards.md)
- [ドキュメントガイドライン](./documentation-guidelines.md)
- [運用ガイドライン](../ops/operational-guidelines.md)

プロジェクト全体のガイドラインについては[プロジェクトREADME](../../README.md)を参照してください。

## ベストプラクティス

### レビュー依頼前
1. 徹底的なセルフレビューの実施
2. 自動テストの全実行
3. コードフォーマットとリントチェック
4. 関連ドキュメントの更新
5. 変更内容の明確な説明準備

### レビュー中
1. フィードバックへの迅速な対応
2. 必要に応じた明確化の提供
3. 要求された変更の徹底実施
4. 修正後の再テスト実行

### 承認後
1. 次ステップの即座実行
2. 関係者への通知
3. デプロイ後の問題監視
4. タスク追跡システムの更新

重要：良いレビュー依頼は全員の時間を節約し、より良いコード品質につながります。
