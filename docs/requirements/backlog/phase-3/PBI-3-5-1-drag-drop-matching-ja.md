# PBI-3-5-1: ドラッグアンドドロップマッチングインターフェース

## 概要

領収書と取引の手動マッチング用の直感的なドラッグアンドドロップインターフェースを作成。視覚的フィードバック、検証、競合解決を含む。

## 実装詳細

### 作成・変更するファイル

1. `src/app/(dashboard)/transactions/matching/page.tsx` - マッチングインターフェースページ
2. `src/components/matching/MatchingWorkspace.tsx` - メインワークスペース
3. `src/components/matching/DraggableReceipt.tsx` - ドラッグ可能な領収書アイテム
4. `src/components/matching/DroppableTransaction.tsx` - ドロップターゲット
5. `src/lib/matching/validation.ts` - マッチ検証ルール
6. `src/hooks/useDragAndDrop.ts` - ドラッグアンドドロップ状態

### 技術要件

- アクセシビリティのための@dnd-kit付きHTML5ドラッグアンドドロップAPI
- ドラッグ操作中のリアルタイム検証
- 有効・無効ドロップゾーンの視覚的フィードバック
- マッチング操作のアンドゥ・リドゥ機能
- フォールバックとしてのキーボードナビゲーションサポート
- タッチデバイス対応

### 検証ルール

```typescript
const matchingValidationRules = {
  amountTolerance: 0.05, // 金額差5%許容
  dateTolerance: 30, // 日付差30日許容
  lowConfidenceThreshold: 0.5, // 50%未満の信頼度で警告
};
```

## メタデータ

- **ステータス**: 未開始
- **作成日**: 2025-01-13
- **担当者**: AIアシスタント

## 受け入れ基準

- [ ] 領収書を取引にドラッグアンドドロップできる
- [ ] 視覚的フィードバックが有効・無効ドロップゾーンを示す
- [ ] マッチ検証が互換性のないマッチを防ぐ
- [ ] アンドゥ・リドゥ機能が全操作で動作する
- [ ] キーボードナビゲーションがアクセシブルなフォールバックを提供
- [ ] タッチデバイスでドラッグ操作をサポート

## 依存関係

- **必須**: PBI-3-3-1 - 領収書リスト（領収書データ）
- **必須**: PBI-3-4-1 - 取引リスト（取引データ）
- **必須**: Phase 1 - 領収書・取引マッチングスキーマ

## 見積もり

2ストーリーポイント

## 優先度

高 - 自動マッチングが失敗した際の手動マッチングに必須
