# AI駆動開発用PBIテンプレート

## 概要

このテンプレートは、AI駆動開発に最適化されたProduct Backlog Items（PBI）の標準フォーマットを定義します。
各PBIは単一のAIセッションで実装可能であるべきです。

## テンプレート構造

`````markdown
# PBI-[フェーズ]-[メジャー]-[マイナー]: [タイトル]

## 説明

[実装する必要があることの簡潔な説明 - 2-3文]

## 実装詳細

### 作成/修正するファイル

1. `path/to/file1.ts` - [変更の説明]
2. `path/to/file2.tsx` - [変更の説明]

### 技術要件

- [具体的な技術要件1]
- [具体的な技術要件2]

### APIエンドポイント（該当する場合）

- `POST /api/endpoint` - [説明]
  - リクエストボディ: `{ field1: string, field2: number }`
  - レスポンス: `{ id: string, status: string }`

### データベーススキーマ（該当する場合）

```sql
CREATE TABLE table_name (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  field1 TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT NOW()
);
```

### 環境変数（該当する場合）

- `VARIABLE_NAME` - [説明と例の値]

### 従うべきコードパターン

- [特定の機能]には[特定のパターン]を使用
- [コンポーネントタイプ]には[アーキテクチャパターン]に従う

### インターフェース仕様（該当する場合）

- **入力インターフェース**: このPBIが期待する正確なデータ構造を定義

  ```typescript
  interface InputData {
    field1: string;
    field2: number;
  }
  ```

- **出力インターフェース**: このPBIが他のPBIに提供するものを定義

  ```typescript
  interface OutputData {
    result: string;
    status: "success" | "error";
  }
  ```

- **サービス契約**: 関数シグネチャと動作を定義
  ```typescript
  interface ServiceContract {
    methodName(param: Type): Promise<ReturnType>;
  }
  ```

## メタデータ

- **ステータス**: [未開始/進行中/完了/ブロック]
- **実際のストーリーポイント**: [完了後に記入]
- **作成日**: [日付]
- **開始日**: [日付]
- **完了日**: [日付]
- **担当者**: [AIアシスタントIDまたは人間]
- **レビュアー**: [このPBIをレビューした人]
- **実装メモ**: [完了後の学び]

## 受け入れ基準

- [ ] [具体的で測定可能な基準1]
- [ ] [具体的で測定可能な基準2]
- [ ] [具体的で測定可能な基準3]

### 検証コマンド

```bash
# 実装を検証するコマンド
npm run test:unit
npm run build
# ここに具体的な検証ステップを追加
```

## 依存関係

- **必須**: PBI-X-X-X - [必要な特定のインターフェース/データ構造]
- **オプション**: PBI-Y-Y-Y - [あれば良いがブロックしない]

## テスト要件

- ユニットテスト: [具体的なテストシナリオ]
- 統合テスト: [具体的な統合ポイント]
- テストデータ: [必要なテストデータ構造]

## 見積もり

[1-2]ストーリーポイント

## 優先度

[高/中/低] - [正当化理由]

## 実装メモ

- [AI実装のための具体的な考慮事項]
- [避けるべき一般的な落とし穴]
- [類似の実装への参照]

````text

## このテンプレートの使用ガイドライン

### 1. 粒度
- 各PBIは最大1-2ストーリーポイントにすべき
- それより大きい場合は、サブタスクに分解

### 2. 具体性
- 正確なファイルパスを含める
- 具体的なコード例を提供
- 明確なインターフェースを定義

### 3. 依存関係
- 必要な正確なデータ構造を指定
- 特定のAPIまたはサービスを参照
- バージョン要件を含める

### 4. テスト
- 具体的なテストシナリオを定義
- テストデータ構造を含める
- カバレッジ要件を指定

### 5. AI対応フォーマット
- 明確で曖昧さのない言語を使用
- 役立つところでは例を提供
- 参照実装を含める

## 使用例

```markdown
# PBI-1-1-1: Supabaseプロジェクトの初期化

## 説明
freeeレシート自動化システム用の初期設定を含む新しいSupabaseプロジェクトを作成します。

## 実装詳細

### 作成/修正するファイル
1. `supabase/config.toml` - Supabaseプロジェクト設定
2. `.env.local` - ローカル開発用の環境変数
3. `src/lib/supabase.ts` - Supabaseクライアント初期化

### 技術要件
- Supabase CLI v1.0+を使用
- 日本リージョン用にプロジェクトを設定
- メール認証を有効化

### 環境変数
- `NEXT_PUBLIC_SUPABASE_URL` - SupabaseプロジェクトURL
- `NEXT_PUBLIC_SUPABASE_ANON_KEY` - Supabase匿名キー
- `SUPABASE_SERVICE_ROLE_KEY` - サービスロールキー（サーバーサイドのみ）

### 従うべきコードパターン
- Supabaseクライアントにはシングルトンパターンを使用
- すべてのデータベーステーブルに適切なTypeScript型を実装

## 受け入れ基準
- [ ] Supabaseプロジェクトが作成されアクセス可能
- [ ] 環境変数が適切に設定されている
- [ ] Supabaseクライアントが正常に接続できる
- [ ] データベーススキーマからTypeScript型が生成されている

## 依存関係
- **必須**: なし（最初のタスク）

## テスト要件
- ユニットテスト: Supabaseクライアント初期化のテスト
- 統合テスト: Supabaseへの接続テスト

## 見積もり
1ストーリーポイント

## 優先度
高 - すべての他の機能に必要な基盤タスク
````
`````
